/*!
 * VERSION: 0.0.2
 * DATE: 2017-05-06
 * UPDATES AND DOCS AT: https://chris-moody.github.io/mkr
 *
 * @license copyright 2017 Christopher C. Moody
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a copy of
 *  this software and associated documentation files (the "Software"), to deal in the
 *  Software without restriction, including without limitation the rights to use, copy,
 *  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,
 *  and to permit persons to whom the Software is furnished to do so, subject to the
 *  following conditions:
 *
 *  The above copyright notice and this permission notice shall be included in all
 *  copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 *  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 *  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 *  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * @author: Christopher C. Moody, chris@moodydigital.com
 */
!function(global,className){var _instances={},_count=-1,msk=function(options){options=options||{},_count++;var id=this._id=options.id||className+"-"+_count;this._parent=mkr.getDefault(options,"parent",document.body),mkr.setDefault(options,"attr",{}),mkr.setDefault(options.attr,"id",id),mkr.setDefault(options,"css",{}),mkr.setDefault(options,"svg",{});var masks=mkr["default"](options.masks,[]),targets=mkr["default"](options.targets,[]);mkr.setDefault(options.svg,"attr",{}),mkr.setDefault(options.svg.attr,"class","msk-svg"),mkr.setDefault(options.svg,"css",{}),mkr.setDefault(options.svg.css,"overflow","visible");for(var s=this._svg=options.svgRoot||mkr.create("svg",options.svg,this._parent),d=mkr.query("defs",s)||mkr.create("defs",{},s),i=(this._mask=mkr.create("mask",{attr:options.attr,css:options.css},d),0);i<masks.length;i++){var m=masks[i];m.length<1&&m.push("rect"),m.length<2&&m.push({}),this.addMask(m[0],m[1])}for(var i=0;i<targets.length;i++){var target=targets[i];target.length<1&&target.push("div"),target.length<2&&target.push({}),this.addTarget(target[0],target[1],s)}_instances[id]=this};msk.prototype={get svg(){return this._svg},get el(){return this._mask},addMask:function(type,options){return mkr.create(type,options,this._mask)},addTarget:function(typeOrTarget,options){return options=options||{},mkr.setDefault(options,"attr",{}),options.attr.mask="url(#"+this._id+")","string"==typeof typeOrTarget?mkr.create(typeOrTarget,options,this._svg):(mkr.add(typeOrTarget,this._svg),TweenMax.set(typeOrTarget,options),typeOrTarget)},addTargets:function(targets,options){options=options||{},mkr.setDefault(options,"css",{}),options.attr.mask="url(#"+this._id+")";var t=[];return mkr.each(targets,function(el){mkr.add(el,this._svg),TweenMax.set(el,options),t.push(el)}),t}},msk.getInstance=function(id){return _instances[id]},msk.getElInstance=function(el){return _instances[el.id]},Object.defineProperty(msk,"VERSION",{get:function(){return"0.0.2"}}),"function"==typeof define&&define.amd?define(function(){return msk}):"undefined"!=typeof module&&module.exports?module.exports=msk:global[className]=msk}(mkr._constructs,"msk");