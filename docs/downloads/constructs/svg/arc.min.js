/*!
 * VERSION: 0.0.2
 * DATE: 2017-05-06
 * UPDATES AND DOCS AT: https://chris-moody.github.io/mkr
 *
 * @license copyright 2017 Christopher C. Moody
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a copy of
 *  this software and associated documentation files (the "Software"), to deal in the
 *  Software without restriction, including without limitation the rights to use, copy,
 *  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,
 *  and to permit persons to whom the Software is furnished to do so, subject to the
 *  following conditions:
 *
 *  The above copyright notice and this permission notice shall be included in all
 *  copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 *  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 *  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 *  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * @author: Christopher C. Moody, chris@moodydigital.com
 */
!function(global,className){var _instances={},_count=-1,arc=function(options){options=options||{},_count++;var id=this._id=options.id||className+"-"+_count;this._parent=mkr.setDefault(options,"parent",document.body),mkr.setDefault(options,"attr",{}),mkr.setDefault(options.attr,"id",id),mkr.setDefault(options,"css",{}),mkr.setDefault(options,"svg",{}),mkr.setDefault(options.attr,"class","arc-path"),mkr.setDefault(options.attr,"fill","transparent"),mkr.setDefault(options.attr,"stroke","#f37121"),mkr.setDefault(options.attr,"stroke-width",15),this._radius=mkr.setDefault(options,"radius",50);var d=2*options.radius;mkr.setDefault(options.svg,"attr",{}),mkr.setDefault(options.svg.attr,"class","arc-svg"),mkr.setDefault(options.svg.attr,"width",d),mkr.setDefault(options.svg.attr,"height",d),mkr.setDefault(options.svg,"css",{}),mkr.setDefault(options.svg.css,"overflow","visible"),this._svg=options.svgRoot,this._svg?"string"==typeof this._svg&&(this._svg=mkr.query(this._svg)):this._svg=mkr.create("svg",options.svg,this._parent),this._start=mkr.setDefault(options,"start",0),this._length=arc.flatten(mkr.setDefault(options,"length",0)),this._end=this._start+this._length,this._cx=mkr.setDefault(options,"cx",this._radius),this._cy=mkr.setDefault(options,"cy",this._radius),this._rotation=mkr.setDefault(options,"rotation",0),this._sweepFlag=mkr.setDefault(options,"sweepFlag",0),mkr.setDefault(options.attr,"d",this.calculatedPath),this._path=mkr.create("path",{attr:options.attr,css:options.css},this._svg),_instances[id]=this};arc.prototype={get svg(){return this._svg},get el(){return this._path},get cx(){return this._cx},set cx(value){this._cx=value,this.update()},get cy(){return this._cy},set cy(value){this._cy=value,this.update()},get radius(){return this._radius},set radius(value){this._radius=value,this.update()},get end(){return this._start+this._length},set end(value){this._end=value,this.length=value-this._start},get start(){return this._start},set start(value){this._start=value,this.update()},get length(){return this._length},set length(value){this._length=value,this.update()},get rotation(){return this._rotation},set rotation(value){this._rotation=value,this.update()},get largeArcFlag(){return this._largeArcFlag},get sweepFlag(){return this._sweepFlag},set sweepFlag(value){this._sweepFlag=value,this.update()},get calculatedPath(){return this.calculatePath(this.cx,this.cy,this.radius,this.start,this.length)},calculatePath:function(cx,cy,r,start,length){length=arc.flatten(length),0>length&&(length+=360);var end=start+length,rad1=(end-90)*(Math.PI/180),rad2=(start-90)*(Math.PI/180),x1=cx+r*Math.cos(rad1),y1=cy+r*Math.sin(rad1),x2=cx+r*Math.cos(rad2),y2=cy+r*Math.sin(rad2),largeArcFlag=180>=length?0:1,sweepFlag=this.sweepFlag;return["M",x1,y1,"A",r,r,0,largeArcFlag,sweepFlag,x2,y2].join(" ")},update:function(draw){mkr["default"](draw,!0)&&this.draw()},draw:function(){TweenMax.set(this._path,{attr:{d:this.calculatedPath}})}},arc.flatten=function(value){return value%360==0&&0!=value&&(value+=359.999*(value/Math.abs(value))),value%360},arc.getInstance=function(id){return _instances[id]},arc.getElInstance=function(el){return _instances[el.id]},Object.defineProperty(arc,"VERSION",{get:function(){return"0.0.2"}}),"function"==typeof define&&define.amd?define(function(){return arc}):"undefined"!=typeof module&&module.exports?module.exports=arc:global[className]=arc}(mkr._constructs,"arc");