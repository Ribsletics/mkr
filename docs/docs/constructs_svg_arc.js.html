<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: constructs/svg/arc.js</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/mkr.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="arc">
            <span class="title">
                <a href="arc.html">arc</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="arc#calculatedOutline"><a href="arc.html#calculatedOutline">calculatedOutline</a></li>
            
                <li data-name="arc#calculatedPath"><a href="arc.html#calculatedPath">calculatedPath</a></li>
            
                <li data-name="arc#cx"><a href="arc.html#cx">cx</a></li>
            
                <li data-name="arc#cy"><a href="arc.html#cy">cy</a></li>
            
                <li data-name="arc#end"><a href="arc.html#end">end</a></li>
            
                <li data-name="arc#largeArcFlag"><a href="arc.html#largeArcFlag">largeArcFlag</a></li>
            
                <li data-name="arc#length"><a href="arc.html#length">length</a></li>
            
                <li data-name="arc#outline"><a href="arc.html#outline">outline</a></li>
            
                <li data-name="arc#path"><a href="arc.html#path">path</a></li>
            
                <li data-name="arc#radius"><a href="arc.html#radius">radius</a></li>
            
                <li data-name="arc#rotation"><a href="arc.html#rotation">rotation</a></li>
            
                <li data-name="arc#start"><a href="arc.html#start">start</a></li>
            
                <li data-name="arc#sweepFlag"><a href="arc.html#sweepFlag">sweepFlag</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="arc.flatten"><a href="arc.html#.flatten">flatten</a></li>
            
                <li data-name="arc.getElInstance"><a href="arc.html#.getElInstance">getElInstance</a></li>
            
                <li data-name="arc.getInstance"><a href="arc.html#.getInstance">getInstance</a></li>
            
                <li data-name="arc#calculatePath"><a href="arc.html#calculatePath">calculatePath</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="clp">
            <span class="title">
                <a href="clp.html">clp</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="clp#svgRoot"><a href="clp.html#svgRoot">svgRoot</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="clp#addClip"><a href="clp.html#addClip">addClip</a></li>
            
                <li data-name="clp#addTarget"><a href="clp.html#addTarget">addTarget</a></li>
            
                <li data-name="clp#addTargets"><a href="clp.html#addTargets">addTargets</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="mkr">
            <span class="title">
                <a href="mkr.html">mkr</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="mkr.defaults"><a href="mkr.html#.defaults">defaults</a></li>
            
                <li data-name="mkr.DEG"><a href="mkr.html#.DEG">DEG</a></li>
            
                <li data-name="mkr.RAD"><a href="mkr.html#.RAD">RAD</a></li>
            
                <li data-name="mkr.rules"><a href="mkr.html#.rules">rules</a></li>
            
                <li data-name="mkr.styles"><a href="mkr.html#.styles">styles</a></li>
            
                <li data-name="mkr#container"><a href="mkr.html#container">container</a></li>
            
                <li data-name="mkr#height"><a href="mkr.html#height">height</a></li>
            
                <li data-name="mkr#id"><a href="mkr.html#id">id</a></li>
            
                <li data-name="mkr#tmln"><a href="mkr.html#tmln">tmln</a></li>
            
                <li data-name="mkr#width"><a href="mkr.html#width">width</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="mkr.add"><a href="mkr.html#.add">add</a></li>
            
                <li data-name="mkr.addRule"><a href="mkr.html#.addRule">addRule</a></li>
            
                <li data-name="mkr.angle"><a href="mkr.html#.angle">angle</a></li>
            
                <li data-name="mkr.clearListeners"><a href="mkr.html#.clearListeners">clearListeners</a></li>
            
                <li data-name="mkr.clone"><a href="mkr.html#.clone">clone</a></li>
            
                <li data-name="mkr.construct"><a href="mkr.html#.construct">construct</a></li>
            
                <li data-name="mkr.copy"><a href="mkr.html#.copy">copy</a></li>
            
                <li data-name="mkr.create"><a href="mkr.html#.create">create</a></li>
            
                <li data-name="mkr.default"><a href="mkr.html#.default">default</a></li>
            
                <li data-name="mkr.deleteRule"><a href="mkr.html#.deleteRule">deleteRule</a></li>
            
                <li data-name="mkr.distance"><a href="mkr.html#.distance">distance</a></li>
            
                <li data-name="mkr.each"><a href="mkr.html#.each">each</a></li>
            
                <li data-name="mkr.extend"><a href="mkr.html#.extend">extend</a></li>
            
                <li data-name="mkr.findRule"><a href="mkr.html#.findRule">findRule</a></li>
            
                <li data-name="mkr.getDefault"><a href="mkr.html#.getDefault">getDefault</a></li>
            
                <li data-name="mkr.getRule"><a href="mkr.html#.getRule">getRule</a></li>
            
                <li data-name="mkr.hasClass"><a href="mkr.html#.hasClass">hasClass</a></li>
            
                <li data-name="mkr.makeDC"><a href="mkr.html#.makeDC">makeDC</a></li>
            
                <li data-name="mkr.merge"><a href="mkr.html#.merge">merge</a></li>
            
                <li data-name="mkr.off"><a href="mkr.html#.off">off</a></li>
            
                <li data-name="mkr.on"><a href="mkr.html#.on">on</a></li>
            
                <li data-name="mkr.once"><a href="mkr.html#.once">once</a></li>
            
                <li data-name="mkr.query"><a href="mkr.html#.query">query</a></li>
            
                <li data-name="mkr.queryAll"><a href="mkr.html#.queryAll">queryAll</a></li>
            
                <li data-name="mkr.randomRange"><a href="mkr.html#.randomRange">randomRange</a></li>
            
                <li data-name="mkr.remove"><a href="mkr.html#.remove">remove</a></li>
            
                <li data-name="mkr.removeRule"><a href="mkr.html#.removeRule">removeRule</a></li>
            
                <li data-name="mkr.reveal"><a href="mkr.html#.reveal">reveal</a></li>
            
                <li data-name="mkr.rotation"><a href="mkr.html#.rotation">rotation</a></li>
            
                <li data-name="mkr.scroll"><a href="mkr.html#.scroll">scroll</a></li>
            
                <li data-name="mkr.setDefault"><a href="mkr.html#.setDefault">setDefault</a></li>
            
                <li data-name="mkr.setPolyPath"><a href="mkr.html#.setPolyPath">setPolyPath</a></li>
            
                <li data-name="mkr.setRule"><a href="mkr.html#.setRule">setRule</a></li>
            
                <li data-name="mkr.unit"><a href="mkr.html#.unit">unit</a></li>
            
                <li data-name="mkr.unitize"><a href="mkr.html#.unitize">unitize</a></li>
            
                <li data-name="mkr.unitless"><a href="mkr.html#.unitless">unitless</a></li>
            
                <li data-name="mkr#batch"><a href="mkr.html#batch">batch</a></li>
            
                <li data-name="mkr#clone"><a href="mkr.html#clone">clone</a></li>
            
                <li data-name="mkr#construct"><a href="mkr.html#construct">construct</a></li>
            
                <li data-name="mkr#create"><a href="mkr.html#create">create</a></li>
            
                <li data-name="mkr#kill"><a href="mkr.html#kill">kill</a></li>
            
                <li data-name="mkr#load"><a href="mkr.html#load">load</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="msk">
            <span class="title">
                <a href="msk.html">msk</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="msk#svgRoot"><a href="msk.html#svgRoot">svgRoot</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="msk#addMask"><a href="msk.html#addMask">addMask</a></li>
            
                <li data-name="msk#addTarget"><a href="msk.html#addTarget">addTarget</a></li>
            
                <li data-name="msk#addTargets"><a href="msk.html#addTargets">addTargets</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="constructs_svg_arc.js.html">Source: constructs/svg/arc.js</h1>
        


    
    <section>
        <article>
            <pre id="source-code" class="prettyprint source "><code>/*!
 * VERSION: 0.0.1
 * DATE: 2017-03-30
 * UPDATES AND DOCS AT: https://chris-moody.github.io/mkr
 *
 * @license copyright 2017 Christopher C. Moody
 *
 *  Permission is hereby granted, free of charge, to any person obtaining a copy of
 *  this software and associated documentation files (the "Software"), to deal in the
 *  Software without restriction, including without limitation the rights to use, copy,
 *  modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,
 *  and to permit persons to whom the Software is furnished to do so, subject to the
 *  following conditions:
 *
 *  The above copyright notice and this permission notice shall be included in all
 *  copies or substantial portions of the Software.
 *
 *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
 *  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
 *  PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 *  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *  OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 *  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * @author: Christopher C. Moody, chris@moodydigital.com
 */

(function(global, className) {
    var _instances = {}, _count=-1;
    
    /**
     * @class arc
     * @classdesc A customizable and animatable svg arc
     * @description Initializes a new arc instance.
     * @param {Object} options - Options use to customize the arc
     * @param {*} [options.parent=document.body] - Element which the arc's svgRoot is appended
     * @param {String=} options.id - The id of the instance. Auto-generated when not provided
     * @param {Number} [options.radius=50] - The radius of the arc
     * @param {Number} [options.cx=this.radius] - The center of the arc along the x-axis
     * @param {Number} [options.cy=this.radius] - The center of the arc along the y-axis
     * @param {Number} [options.start=0] - The starting point of the arc along its circle in degrees
     * @param {Number} [options.length=0] - The length of the arc along in degrees
     * @param {Number} [options.rotation=0] - The rotation of the arc in degrees
     * @param {Number} [options.sweepFlag=0] - The sweepFlag value used in the svg drawing command to produce the arc
     * @param {*=} options.svgRoot - svg element which to append the arc. Can be a selector string or element. It is auto-generated and added to options.parent when not provided
     * @param {Object=} options.svg - Options used to create svgRoot when none is provided

     * @param {Object=} options.path - A set of attributes and css properties used to create the main path element
     * @param {Object=} options.path.attr - Attributes to apply to the arc's main path element.
     * @param {String} [options.path.attr.id=this.id+'-path'] - id applied to the main path element.
     * @param {String} [options.path.attr.class='arc-path'] - Class string applied to the main path element.
     * @param {String} [options.path.attr.fill='transparent'] - The fill color of the main path.
     * @param {String} [options.path.attr.stroke='#f37121'] - The stroke color of the main path.
     * @param {String} [options.path.attr['stroke-width']=15] - The stroke-width of the main path.

     * @param {Object=} options.outline - A set of attributes and css properties used to create the outline path element
     * @param {Object=} options.outline.attr - Attributes to apply to the arc's outline path element.
     * @param {String} [options.outline.attr.id=this.id+'-outline'] - id applied to the outline path element.
     * @param {String} [options.outline.attr.class='arc-outline'] - Class string applied to the outline path element.
     * @param {String} [options.outline.attr.fill='transparent'] - The fill color of the outline path.
     * @param {String} [options.outline.attr.stroke='transparent'] - The stroke color of the outline path.
     * @param {String} [options.outline.attr['stroke-width']=15] - The stroke-width of the outline path.

     * @requires {@link  mkr}
     * @returns {arc} A new arc instance.
     */

    var arc = function(options) {
        _count++;
        var id = this._id = options.id || className+'-'+_count;

        options = options || {};

        mkr.setDefault(options, 'path', {});
        mkr.setDefault(options.path, 'attr', {});
        mkr.setDefault(options.path.attr, 'id', id+'-path');
        mkr.setDefault(options.path.attr, 'class', 'arc-path');
        mkr.setDefault(options.path.attr, 'fill', 'transparent');
        mkr.setDefault(options.path.attr, 'stroke', '#f37121');
        mkr.setDefault(options.path.attr, 'stroke-width', 15);

        mkr.setDefault(options, 'outline', {});
        mkr.setDefault(options.outline, 'attr', {});
        mkr.setDefault(options.outline.attr, 'id', id+'-outline');
        mkr.setDefault(options.outline.attr, 'class', 'arc-outline');
        mkr.setDefault(options.outline.attr, 'fill', 'transparent');
        mkr.setDefault(options.outline.attr, 'stroke', 'transparent');
        mkr.setDefault(options.outline.attr, 'stroke-width', options.path.attr['stroke-width']);

        this._radius = mkr.setDefault(options, 'radius', 50);
        var d = 2*options.radius;

        this._parent = mkr.setDefault(options, 'parent', document.body);
        //this._svg = options.svgRoot || mkr.create('svg', {attr:{id:id, class:'arc-svg', width:d, height:d}, css:{overflow:'visible'}}, this._parent);

        mkr.setDefault(options, 'svg', {});
        mkr.setDefault(options.svg, 'attr', {});
        mkr.setDefault(options.svg.attr, 'id', id);
        mkr.setDefault(options.svg.attr, 'class', 'arc-svg');
        mkr.setDefault(options.svg.attr, 'width', d);
        mkr.setDefault(options.svg.attr, 'height', d);
        mkr.setDefault(options.svg, 'css', {});
        mkr.setDefault(options.svg.css, 'overflow', visible);

        this._svg = options.svgRoot;
        if(!this._svg) {
            this._svg = mkr.create('svg', options.svg, this._parent);
        }
        else if(typeof this._svg === 'string') {
            this._svg = mkr.query(this._svg)
        }
        this._start = mkr.setDefault(options, 'start', 0);
        
        this._length = arc.flatten(mkr.setDefault(options, 'length', 0));
        this._end = this._start + this._length;

        this._cx = mkr.setDefault(options, 'cx', this._radius);
        this._cy = mkr.setDefault(options, 'cy', this._radius);
        this._rotation = mkr.setDefault(options, 'rotation', 0);
        this._sweepFlag = mkr.setDefault(options, 'sweepFlag', 0);

        mkr.setDefault(options.path.attr, 'd', this.path);    
        mkr.setDefault(options.outline.attr, 'd', this.outline);    

        //this._outline = mkr.create('path', options.outline, this._svg);
        this._path = mkr.create('path', options.path, this._svg);   

        _instances[id] = this;
    };
  
    arc.prototype = {
        /**
         * @name arc#cx
         * @public
         * @type Number
         * @description The center of the arc along the x-axis
        **/
        get cx() {return this._cx;},
        set cx(value) {
            this._cx = value;
            this.update();
        },

        /**
         * @name arc#cy
         * @public
         * @type Number
         * @description The center of the arc along the y-axis
        **/
        get cy() {return this._cy;},
        set cy(value) {
            this._cy = value;
            this.update();
        },

        /**
         * @name arc#radius
         * @public
         * @type Number
         * @description The radius of the arc
        **/
        get radius() {return this._radius;},
        set radius(value) {
            this._radius = value;
            this.update();
        },

        /**
         * @name arc#end
         * @public
         * @type Number
         * @description The ending point of the arc along its circle in degrees
        **/
        get end() {return this._start+this._length;},
        set end(value) {
            this._end = value;
            this.length = value-this._start;
        },
        
        /**
         * @name arc#start
         * @public
         * @type Number
         * @description The starting point of the arc along its circle in degrees
        **/
        get start() {return this._start;},
        set start(value) {
            this._start = value;
            this.update();
        },

        /**
         * @name arc#length
         * @public
         * @type Number
         * @description The length of the arc in degrees
        **/
        get length() {return this._length;},
        set length(value) {
            this._length = value;
            this.update();
        },

        /**
         * @name arc#rotation
         * @public
         * @type Number
         * @description The rotation of the arc in degrees
        **/
        get rotation() {return this._rotation;},
        set rotation(value) {
            this._rotation = value;
            this.update();
        },

        /**
         * @name arc#largeArcFlag
         * @public
         * @readonly
         * @type Number
         * @description The largeArcFlag value used in the svg drawing command to produce the arc
        **/
        get largeArcFlag() {return this._largeArcFlag;},

        /**
         * @name arc#sweepFlag
         * @public
         * @type Number
         * @description The sweepFlag value used in the svg drawing command to produce the arc
        **/
        get sweepFlag() {return this._sweepFlag;},
        set sweepFlag(value) {
            this._sweepFlag = value;
            this.update();
        },

        /**
         * @name arc#calculatedPath
         * @public
         * @readonly
         * @type String
         * @description The svg drawing command to produce the main path element
        **/
        get calculatedPath() {
            return this.calculatePath(this.cx, this.cy, this.radius, this.start, this.length);
        },

        /**
         * @name arc#calculatedOutline
         * @public
         * @readonly
         * @type String
         * @description The svg drawing command to produce the outline path element
        **/
        get calculatedOutline() {
            return this.calculatePath(this.cx, this.cy, this.radius, 0, 360);
        },

        /**
         * @name arc#path
         * @public
         * @readonly
         * @type Number
         * @description The main path element
        **/
        get path() {
            return this._path;
        },

        /**
         * @name arc#outline
         * @public
         * @readonly
         * @type Number
         * @description The outline path element
        **/
        get outline() {
            return this._outline;
        },

        /**
         * @function calculatePath
         * @memberof arc.prototype
         * @public
         * @description Returns the svg drawing command to produce the specified
         * @param {Number} cx - The center of the arc along the x-axis
         * @param {Number} cy - The center of the arc along the y-axis
         * @param {Number} r - The radius of the arc
         * @param {Number} start - The starting point of the arc along its circle in degrees
         * @param {Number} length - The length of the arc in degrees
         * @returns {String} The svg drawing command 
        **/
        calculatePath: function(cx, cy, r, start, length) {
            length = arc.flatten(length);
            if(length &lt; 0) length+= 360;
            var end = start + length;
            
            var rad1 = (end-90)*(Math.PI/180.0);
            var rad2 = (start-90)*(Math.PI/180.0);
            var x1 = cx+(r*Math.cos(rad1));
            var y1 = cy+(r*Math.sin(rad1));
            var x2 = cx+(r*Math.cos(rad2));
            var y2 = cy+(r*Math.sin(rad2)); t
            var largeArcFlag = length &lt;= 180 ? 0 : 1;
            var sweepFlag = this.sweepFlag;

            return [
                "M", x1, y1, 
                "A", r, r, 0, largeArcFlag, sweepFlag, x2, y2
            ].join(" ");
        },

        /**
         * @function update
         * @memberof arc.prototype
         * @private
         * @description Updates the arc
         * @param {Boolean} [draw=true] - Whether to invoke the draw function
        **/
        update: function(draw) {
            if(mkr.default(draw, true)) this.draw();
        },

        /**
         * @function draw
         * @memberof arc.prototype
         * @private
         * @description Draws the main and outline paths of the arc
        **/
        draw: function() {
            TweenMax.set(this._path, {attr:{d:this.path}});
            TweenMax.set(this._outline, {attr:{d:this.outline}});
        }
    };

    /**
    * @function flatten
    * @memberof arc
    * @static
    * @description The provided value flattened in the range of 0-360
    * @param {Number} value - The value to flatten
    * @returns {Number} The flattened value 
    **/
    arc.flatten = function(value) {
        if(value%360 == 0 &amp;&amp; value != 0) value+= 359.999*(value/Math.abs(value));
        return value%360;
    };

    /**
    * @function getInstance
    * @memberof arc
    * @static
    * @description returns the arc instance associated with the id
    * @param {String} id - The lookup id
    * @returns {arc} The associate arc, if it exists
    **/
    arc.getInstance = function(id) {
        return _instances[id];
    };

    /**
    * @function getElInstance
    * @memberof arc
    * @static
    * @description returns the arc instance associated with the provided element's id attribute
    * @param {Element} el - The element with the lookup id
    * @returns {arc} The associate arc, if it exists
    **/    
    arc.getElInstance = function(el) {
        return _instances[el.id];
    };

    /**
    * @alias arc.VERSION
    * @memberof arc
    * @static
    * @readonly
    * @type String
    * @description returns arc's version number
    **/
    Object.defineProperty(arc, 'VERSION', {
        get: function() {
          return '0.0.1';
        }
    });

    if(typeof define === 'function' &amp;&amp; define.amd){ //AMD
        define(function () { return arc; });
    } else if (typeof module !== 'undefined' &amp;&amp; module.exports){ //node
        module.exports = arc;
    } else { //browser
        global[className] = arc;
    }
})(mkr._constructs, 'arc');</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Apr 27 2017 02:38:34 GMT-0400 (EDT)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/mkr-jsdoc.js"></script>
</body>
</html>
