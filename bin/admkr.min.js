/*!
 * VERSION: 0.0.8
 * DATE: 2017-02-22
 * UPDATES AND DOCS AT: nowhere but here for now
 *
 * @license MIT Copyright (c) 2017, Christopher C. Moody. All rights reserved.
 * 
 * @author: Christopher C. Moody, chris@moodydigital.com
 */
!function(className){var _instances={},_count=0,admkr=function(options){var id=_count;_count++,this._elements=[],this._elDefaults={},this._count=0,this._imgDir=admkr.setDefault("imgDir","",options),delete options.imgDir,this._preload=options.preload,delete options.preload,this._images=[],this._loadCallback=null,this._loadContext=null;var _loadedImages=0;admkr.setDefault("attr",{},options),"class"in options.attr?options.attr.class+=" admkr-container":options.attr.class="admkr-container",this.container=this.createElement("div",options,document.body,!0),_instances[id]=this;var _imageLoaded=function(){_loadedImages++;var ad=_instances[id];_loadedImages==ad._images.length&&(ad._loadCallback&&ad._loadCallback.apply(ad._loadContext),_preload=!1)};this.load=function(callback,context){this._loadCallback=callback,this._loadContext=context;var i=this._images.length;if(i<=0)return void this._loadCallback.apply(this._loadContext);for(;i--;)this._images[i].img.onload=_imageLoaded;for(i=this._images.length;i--;)this._images[i].img.src=this._images[i].src}};admkr.prototype.createElement=function(type,options,parent,ignore){var t=type.toLowerCase();options=options||{},options.css=options.css||{},options.attr=options.attr||{},"bg"in options&&("#"==options.bg.charAt(0)||"transparent"==options.bg?options.css.backgroundColor=options.bg:options.css.backgroundImage="url("+this._imgDir+options.bg+")");var element,xlnkns="http://www.w3.org/1999/xlink",svgns="http://www.w3.org/2000/svg",svgTags=["svg","defs","use","image","g","mask","clippath","lineargradient","radialgradient","stop","text","rect","circle","ellipse","line","polyline","polygon","path"];return svgTags.indexOf(t)>=0?(element=document.createElementNS(svgns,type),"xlink:href"in options.attr&&(element.setAttributeNS(xlnkns,"href",options.attr["xlink:href"]),delete options.attr["xlink:href"])):(element=document.createElement(type),options.css.position=options.css.position||"absolute",admkr.setDefault("force3d",!0,options)),"img"===type&&this._preload&&options.attr&&options.attr.src&&(this._images.push({img:element,src:options.attr.src}),delete options.attr.src),this.add(element,options,parent,ignore),element},admkr.prototype.clone=function(target,options,parent,ignore,deep){options=options||{},options.css=options.css||{},options.css.position=options.css.position||"absolute",admkr.setDefault("force3d",!0,options),deep=void 0===deep||deep;var clone;return"svg"===target.tagName.toLowerCase()?(options.text=target.innerHTML,clone=this.createElement("svg",options,parent,!0)):(clone=target.cloneNode(deep),delete clone.id),this.add(clone,options,parent,ignore),clone},admkr.prototype.add=function(element,options,parent,ignore){return TweenLite.set(element,options),parent=null==parent||void 0===parent?this.container:parent,parent&&parent.appendChild(element),ignore||this.saveElement(element,options),element},admkr.prototype.remove=function(element,killTweens,removeFromDom){var n=this._elements.indexOf(element);if(n<-1){this._elements.splice(n,1);var mkrindex=element.getAttribute("mkrindex");delete this._elDefaults[mkrindex],killTweens=void 0===killTweens||killTweens,killTweens&&TweenLite.killTweensOf(element),removeFromDom=void 0===removeFromDom||removeFromDom,removeFromDom&&element.parentNode.removeChild(element)}return element},admkr.prototype.saveElement=function(element,options){element.setAttribute("mkrindex",this._count),this._elDefaults[this._count]=options,this._elements.push(element),this._count++},admkr.prototype.killAllTweens=function(){for(var len=this._elements.length,i=0;i<len;i++)TweenLite.killTweensOf(this._elements[i])},admkr.prototype.nuke=function(){this.killAllTweens(),this.container.parentNode.removeChild(this.container)},admkr.prototype.reset=function(killTweens){var len=this._elements.length;killTweens=void 0===killTweens||killTweens;for(var i=0;i<len;i++){var el=this._elements[i],mkrindex=el.getAttribute("mkrindex");this._elDefaults[mkrindex]&&(console.log(mkrindex),killTweens&&TweenLite.killTweensOf(el),TweenLite.to(el,0,{clearProps:"all"}),TweenLite.set(el,this._elDefaults[mkrindex]))}},admkr.makeDC=function(width,height,options){options=options||{},admkr.setDefault("attr",{},options),admkr.setDefault("css",{},options),admkr.setDefault("width",width,options.css),admkr.setDefault("height",height,options.css),admkr.setDefault("top","0px",options.css),admkr.setDefault("left","0px",options.css),admkr.setDefault("zIndex",1,options.css),admkr.setDefault("overflow","hidden",options.css);var ad=new admkr(options);return ad.width=width,ad.height=height,ad.border=document.createElement("div"),TweenLite.set(ad.border,{attr:{class:"admkr-border"},css:{position:"absolute",pointerEvents:"none",zIndex:"1000",left:"0px",top:"0px",border:"1px solid #666666",width:width-2,height:height-2}}),ad.container.appendChild(ad.border),ad},admkr.reveal=function(target,options){if(null!=target&&"undefined"!=typeof target){options&&TweenLite.set(target,options);var targets;targets="string"==typeof target?admkr.queryAll(target):Array.isArray(target)?target:[target],targets.forEach(function(el){for(var parent=el.parentNode;parent;)TweenLite.set(parent,{overflowY:"visible",overflowX:"visible",overflow:"visible"}),parent=parent.parentNode})}},admkr.extend=function(baseObj){"function"!=typeof Object.create&&(Object.create=function(o){function F(){}return F.prototype=o,new F}),newObj=Object.create(baseObj)},admkr.get=function(id){return document.getElementById(id)},admkr.query=function(selectors,baseElement){return baseElement=baseElement||document,baseElement.querySelector(selectors)},admkr.queryAll=function(selectors,baseElement){return baseElement=baseElement||document,baseElement.querySelectorAll(selectors)},admkr.on=function(target,eventType,callback){if(null!=target&&"undefined"!=typeof target){var targets;targets="string"==typeof target?admkr.queryAll(target):Array.isArray(target)?target:[target],targets.forEach(function(el){el.addEventListener(eventType,callback,!1)})}},admkr.off=function(target,eventType,callback){if(null!=target&&"undefined"!=typeof target){var targets;targets="string"==typeof target?admkr.queryAll(target):Array.isArray(target)?target:[target],targets.forEach(function(el){el.removeEventListener(eventType,callback,!1)})}},admkr.setDefault=function(propertyName,value,target){return propertyName in target||(target[propertyName]=value),target[propertyName]};var createStyleSheet=function(){var style=document.createElement("style");return style.appendChild(document.createTextNode("")),document.head.appendChild(style),style.sheet};return admkr.styles=createStyleSheet(),admkr.addRule=function(selector,rules,index){index=void 0===index?admkr.styles.cssRules.length:index,"insertRule"in admkr.styles?admkr.styles.insertRule(selector+"{"+rules+"}",index):"addRule"in admkr.styles&&admkr.styles.addRule(selector,rules,index)},admkr.setPolyClipPath=function(target,points,unit){if(!([null,void 0].indexOf(target)<0||[null,void 0].indexOf(points)<0)){unit=void 0===unit?"%":unit;for(var clipPath="polygon(",len=points.length,i=0;i<len;i++)clipPath+=points[i]+unit,i<len-1&&(clipPath+=i%2==0?" ":",");clipPath+=")",TweenLite.set(target,{clipPath:clipPath})}},admkr.distance=function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2))},admkr.rotation=function(x1,y1,x2,y2){var dx=x2-x1,dy=y2-y1;return Math.atan2(dy,dx)},admkr.angle=function(x1,y1,x2,y2){var ang=admkr.rotation(x1,y1,x2,y2)*admkr.DEG;return ang},admkr.RAD=Math.PI/180,admkr.DEG=180/Math.PI,admkr.randomRange=function(min,max){return Math.floor(Math.random()*(max-min+.99))+min},window[className]=admkr,admkr}("admkr");